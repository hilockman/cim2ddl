<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
   <title>分布式计算-模型数据查看</title>
   <div th:replace="fragments/header :: header-css" /></div>
  
   <style>

      #table-nav {
      	height:100%;
      }

   	  
   	 #page-wrapper textarea {
   	 	width:100%;
   	 	height:100%;
   	 }
   	  
 
   </style>
   

   <script type="text/javascript">

  function logEvent(event, data, msg){
//        var args = $.isArray(args) ? args.join(", ") :
    msg = msg ? ": " + msg : "";
    $.ui.fancytree.info("Event('" + event.type + "', node=" + data.node + ")" + msg);
  }
   $(function(){  // on page load

	      items = modelApi.getAll();
          dataMap = {};
          allData = items.map(function (item) 
        		  {

        	  		dataMap[item.id] = item;
        	  		item.children = [];
        	  		item.childCount = 0;
         	        
        	        return item;
        		  }
   
          );
          
          var rootItems = [];
          
          allData.forEach(function (data) {
        	  if (data.parentId != null) {
        		  let p = dataMap[data.parentId];
        		  p.children.push(data);
        		  p.childCount++;
        	  } else {
        		  rootItems.push(data);
        	  }
          } );
          
          
         buildTree($("#tree ul"), rootItems, rootItems[0].children[0],function click(span){
        	 var li = span.parent('li');
			 var folder = li.attr("parent");
			 var file = li.attr("id");

			   
             loadFile(folder, file);
        });
          

	    });
   
   
      function loadFile(folder, file) {    	  
    	  
    	  var content = modelApi.getFile(folder, file);
    	  console.log(content);
    	  $("#file-content").html(content.value);
      }
	</script>
</head>
<body>
 <div  th:replace="fragments/header :: header"></div>

 	    
 <div class="container-fluid">  
     
     <div class="row content-row">
        <div class="col-xs-2 content-row-left" >
        	<nav id="table-nav" class="navbar-default navbar-static-side" role="navigation">		
			  <div  id="tree" class="tree well">
			   <ul>
			   </ul>
			  </div>	    
			</nav>
        </div>

	 
	    <div id="page-wrapper" class="col-xs-10 content-row-right">
			
				<textarea id="file-content" rows="" cols="">
					test
				</textarea>
	
	    </div> 
         
     </div>
	<div th:replace="fragments/footer :: footer"></div>
  
</div>

 	
</body>

</html>